<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SSE Notification Test</title>
</head>
<body>
<h1>SSE 알림 테스트</h1>
<div id="messages"></div>

<script>
    const eventSource = new EventSource('http://localhost:8080/products/notifications/stream');

    // 메시지를 수신했을 때 onmessage 대신 이벤트 타입을 지정하여 수신
    eventSource.addEventListener('restock-notification', function(event) {
        const newElement = document.createElement("div");
        newElement.innerHTML = "받은 메시지: " + event.data;
        document.getElementById("messages").appendChild(newElement);
    });

    // 오류 발생 시 콘솔에 출력
    eventSource.onerror = function(event) {
        console.error("Error with SSE:", event);
    };

</script>
</body>
</html>
